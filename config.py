#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Конфигурация для Telegram бота базы знаний Homeline
"""

import os

# Токен бота - из переменной окружения или файла
TOKEN = os.getenv("TELEGRAM_TOKEN") or "8272254555:AAGmzBd_6dEySqfKelR8vwoEtT5-21_ehR8"
BASE_URL = f"https://api.telegram.org/bot{TOKEN}"

# Автоопределение окружения
IS_PRODUCTION = os.getenv("RENDER") or os.getenv("RAILWAY_ENVIRONMENT") or os.getenv("HEROKU")

# Папка с файлами в зависимости от окружения
if IS_PRODUCTION:
    BASE_FOLDER = "pdf_files"  # На сервере
else:
    BASE_FOLDER = os.getenv("BASE_FOLDER") or "База знаний Homeline Токмак"  # Локально

# База знаний - РЕАЛЬНАЯ СТРУКТУРА ФАЙЛОВ НА СЕРВЕРЕ
KNOWLEDGE_BASE = {
    "critical": {
        "name": "1️⃣ КРИТИЧЕСКИЕ",
        "folder": "КРИТИЧЕСКИЕ",
        "files": {
            "диагностика_затухания_gpon.pdf": "Диагностика затухания GPON",
            "демонстрация_услуг.pdf": "Демонстрация услуг клиенту"
        }
    },
    "connections": {
        "name": "2️⃣ ПОДКЛЮЧЕНИЯ", 
        "folder": "ПОДКЛЮЧЕНИЯ",
        "files": {
            "частный_сектор.pdf": "Подключение в частном секторе",
            "мкд.pdf": "Подключение в МКД",
            "коммерческие.pdf": "Коммерческие объекты"
        }
    },
    "equipment": {
        "name": "3️⃣ ОБОРУДОВАНИЕ",
        "folder": "ОБОРУДОВАНИЕ", 
        "files": {
            "простые_ont.pdf": "Простые ONT (без WiFi)",
            "гибриды.pdf": "Гибриды (ONT + WiFi)",
            "настройка_роутеров.pdf": "Настройка роутеров",
            "настройка_скалывателя.pdf": "Настройка скалывателя и стриппера",
            "сварочные_аппараты.pdf": "Сварочные аппараты",
            "измерители_мощности.pdf": "Измерители оптической мощности",
            "быстрый_справочник.pdf": "Быстрый справочник"
        }
    }
}

# Специальные файлы (находятся в корне или в оборудовании)
SPECIAL_FILES = {
    "quick": "быстрый_справочник.pdf",  # Из папки ОБОРУДОВАНИЕ
}

# Поисковые ключевые слова - ИСПРАВЛЕНЫ ПОД РЕАЛЬНЫЕ ИМЕНА ФАЙЛОВ
SEARCH_KEYWORDS = {
    # ===================
    # ДИАГНОСТИКА ЗАТУХАНИЯ GPON
    # ===================
    "затухание": ["диагностика_затухания_gpon.pdf"],
    "затухания": ["диагностика_затухания_gpon.pdf"],
    "сигнал": ["диагностика_затухания_gpon.pdf", "измерители_мощности.pdf"],
    "сигнала": ["диагностика_затухания_gpon.pdf", "измерители_мощности.pdf"],
    "диагностика": ["диагностика_затухания_gpon.pdf"],
    "диагноз": ["диагностика_затухания_gpon.pdf"],
    "проверка": ["диагностика_затухания_gpon.pdf"],
    "тестирование": ["диагностика_затухания_gpon.pdf"],
    
    # GPON термины
    "gpon": ["диагностика_затухания_gpon.pdf"],
    "жпон": ["диагностика_затухания_gpon.pdf"],
    "геопон": ["диагностика_затухания_gpon.pdf"],
    "оптика": ["диагностика_затухания_gpon.pdf"],
    "оптический": ["диагностика_затухания_gpon.pdf"],
    "оптическая": ["диагностика_затухания_gpon.pdf"],
    "волс": ["диагностика_затухания_gpon.pdf"],
    "волокно": ["диагностика_затухания_gpon.pdf"],
    "фибер": ["диагностика_затухания_gpon.pdf"],
    "fiber": ["диагностика_затухания_gpon.pdf"],
    
    # Уровни сигнала
    "дбм": ["диагностика_затухания_gpon.pdf"],
    "dbm": ["диагностика_затухания_gpon.pdf"],
    "-20": ["диагностика_затухания_gpon.pdf"],
    "-25": ["диагностика_затухания_gpon.pdf"],
    "-30": ["диагностика_затухания_gpon.pdf"],
    "потери": ["диагностика_затухания_gpon.pdf"],
    "потеря": ["диагностика_затухания_gpon.pdf"],
    "уровень": ["диагностика_затухания_gpon.pdf"],
    "мощность": ["диагностика_затухания_gpon.pdf", "измерители_мощности.pdf"],
    "rx": ["диагностика_затухания_gpon.pdf"],
    "tx": ["диагностика_затухания_gpon.pdf"],
    "прием": ["диагностика_затухания_gpon.pdf"],
    "передача": ["диагностика_затухания_gpon.pdf"],
    
    # ===================
    # ONT / ONU / МОДЕМЫ
    # ===================
    "онт": ["простые_ont.pdf", "гибриды.pdf"],
    "ону": ["простые_ont.pdf", "гибриды.pdf"],
    "модем": ["простые_ont.pdf", "гибриды.pdf"],
    "модемчик": ["простые_ont.pdf", "гибриды.pdf"],
    "модема": ["простые_ont.pdf", "гибриды.pdf"],
    "ont": ["простые_ont.pdf", "гибриды.pdf"],
    "onu": ["простые_ont.pdf", "гибриды.pdf"],
    "optical": ["простые_ont.pdf", "гибриды.pdf"],
    "network": ["простые_ont.pdf", "гибриды.pdf"],
    "terminal": ["простые_ont.pdf", "гибриды.pdf"],
    "unit": ["простые_ont.pdf", "гибриды.pdf"],
    
    # Разговорные названия
    "коробка": ["простые_ont.pdf", "гибриды.pdf"],
    "коробочка": ["простые_ont.pdf", "гибриды.pdf"],
    "устройство": ["простые_ont.pdf", "гибриды.pdf"],
    "девайс": ["простые_ont.pdf", "гибриды.pdf"],
    "железо": ["простые_ont.pdf", "гибриды.pdf", "сварочные_аппараты.pdf"],
    "оборудование": ["простые_ont.pdf", "гибриды.pdf", "сварочные_аппараты.pdf"],
    
    # Индикаторы
    "индикатор": ["простые_ont.pdf", "гибриды.pdf"],
    "индикаторы": ["простые_ont.pdf", "гибриды.pdf"],
    "лампочка": ["простые_ont.pdf", "гибриды.pdf"],
    "лампочки": ["простые_ont.pdf", "гибриды.pdf"],
    "светодиод": ["простые_ont.pdf", "гибриды.pdf"],
    "диод": ["простые_ont.pdf", "гибриды.pdf"],
    "горит": ["простые_ont.pdf", "гибриды.pdf"],
    "мигает": ["простые_ont.pdf", "гибриды.pdf"],
    "моргает": ["простые_ont.pdf", "гибриды.pdf"],
    "красный": ["простые_ont.pdf", "гибриды.pdf"],
    "зеленый": ["простые_ont.pdf", "гибриды.pdf"],
    "желтый": ["простые_ont.pdf", "гибриды.pdf"],
    "синий": ["простые_ont.pdf", "гибриды.pdf"],
    "статус": ["простые_ont.pdf", "гибриды.pdf"],
    
    # ===================
    # ГИБРИДЫ (ONT + WiFi)
    # ===================
    "гибрид": ["гибриды.pdf"],
    "гибриды": ["гибриды.pdf"],
    "hybrid": ["гибриды.pdf"],
    "комби": ["гибриды.pdf"],
    "комбо": ["гибриды.pdf"],
    "2в1": ["гибриды.pdf"],
    "два в одном": ["гибриды.pdf"],
    
    # Модели
    "gp1705": ["гибриды.pdf"],
    "gp-1705": ["гибриды.pdf"],
    "жп1705": ["гибриды.pdf"],
    "xg-ont": ["гибриды.pdf"],
    "xgont": ["гибриды.pdf"],
    "икс-жи": ["гибриды.pdf"],
    
    # ===================
    # WiFi / РОУТЕРЫ
    # ===================
    "wifi": ["настройка_роутеров.pdf", "гибриды.pdf"],
    "wi-fi": ["настройка_роутеров.pdf", "гибриды.pdf"],
    "вайфай": ["настройка_роутеров.pdf", "гибриды.pdf"],
    "вай-фай": ["настройка_роутеров.pdf", "гибриды.pdf"],
    "вифи": ["настройка_роутеров.pdf", "гибриды.pdf"],
    "wireless": ["настройка_роутеров.pdf", "гибриды.pdf"],
    "беспроводная": ["настройка_роутеров.pdf", "гибриды.pdf"],
    "беспроводной": ["настройка_роутеров.pdf", "гибриды.pdf"],
    "радио": ["настройка_роутеров.pdf", "гибриды.pdf"],
    
    # Роутеры
    "роутер": ["настройка_роутеров.pdf"],
    "router": ["настройка_роутеров.pdf"],
    "маршрутизатор": ["настройка_роутеров.pdf"],
    "точка": ["настройка_роутеров.pdf"],
    "access": ["настройка_роутеров.pdf"],
    "point": ["настройка_роутеров.pdf"],
    "ap": ["настройка_роутеров.pdf"],
    
    # Настройки сети
    "настройка": ["настройка_роутеров.pdf", "настройка_скалывателя.pdf"],
    "настройки": ["настройка_роутеров.pdf", "настройка_скалывателя.pdf"],
    "конфигурация": ["настройка_роутеров.pdf"],
    "config": ["настройка_роутеров.pdf"],
    "setup": ["настройка_роутеров.pdf"],
    "интернет": ["настройка_роутеров.pdf"],
    "интернета": ["настройка_роутеров.pdf"],
    "инет": ["настройка_роутеров.pdf"],
    "нет": ["настройка_роутеров.pdf"],
    "сеть": ["настройка_роутеров.pdf"],
    "сети": ["настройка_роутеров.pdf"],
    "подключиться": ["настройка_роутеров.pdf"],
    "подключение": ["настройка_роутеров.pdf", "частный_сектор.pdf", "мкд.pdf", "коммерческие.pdf"],
    
    # Пароли и безопасность
    "пароль": ["настройка_роутеров.pdf"],
    "пасс": ["настройка_роутеров.pdf"],
    "password": ["настройка_роутеров.pdf"],
    "ключ": ["настройка_роутеров.pdf"],
    "key": ["настройка_роутеров.pdf"],
    "защита": ["настройка_роутеров.pdf"],
    "security": ["настройка_роутеров.pdf"],
    "wpa": ["настройка_роутеров.pdf"],
    "wep": ["настройка_роутеров.pdf"],
    
    # SSID
    "ssid": ["настройка_роутеров.pdf"],
    "название": ["настройка_роутеров.pdf"],
    "имя": ["настройка_роутеров.pdf"],
    "name": ["настройка_роутеров.pdf"],
    "сид": ["настройка_роутеров.pdf"],
    "эсэсайди": ["настройка_роутеров.pdf"],
    
    # ===================
    # СВАРКА И ИНСТРУМЕНТЫ
    # ===================
    "сварка": ["настройка_скалывателя.pdf", "сварочные_аппараты.pdf"],
    "сварочный": ["сварочные_аппараты.pdf"],
    "сварочная": ["сварочные_аппараты.pdf"],
    "сварить": ["настройка_скалывателя.pdf", "сварочные_аппараты.pdf"],
    "сваривание": ["настройка_скалывателя.pdf", "сварочные_аппараты.pdf"],
    "аппарат": ["сварочные_аппараты.pdf"],
    "аппараты": ["сварочные_аппараты.pdf"],
    "машина": ["сварочные_аппараты.pdf"],
    "машинка": ["сварочные_аппараты.pdf"],
    "сварщик": ["сварочные_аппараты.pdf"],
    
    # Fusion splicer
    "fusion": ["сварочные_аппараты.pdf"],
    "splicer": ["сварочные_аппараты.pdf"],
    "фьюжн": ["сварочные_аппараты.pdf"],
    "сплайсер": ["сварочные_аппараты.pdf"],
    "спайсер": ["сварочные_аппараты.pdf"],
    
    # Скалыватель
    "скол": ["настройка_скалывателя.pdf"],
    "скалывание": ["настройка_скалывателя.pdf"],
    "скалыватель": ["настройка_скалывателя.pdf"],
    "скалывателя": ["настройка_скалывателя.pdf"],
    "скалыватели": ["настройка_скалывателя.pdf"],
    "cleaver": ["настройка_скалывателя.pdf"],
    "кливер": ["настройка_скалывателя.pdf"],
    "резак": ["настройка_скалывателя.pdf"],
    "резка": ["настройка_скалывателя.pdf"],
    "обрезать": ["настройка_скалывателя.pdf"],
    "обрезка": ["настройка_скалывателя.pdf"],
    
    # Стриппер
    "стриппер": ["настройка_скалывателя.pdf"],
    "стриппера": ["настройка_скалывателя.pdf"],
    "stripper": ["настройка_скалывателя.pdf"],
    "стрипер": ["настройка_скалывателя.pdf"],
    "зачистка": ["настройка_скалывателя.pdf"],
    "зачистить": ["настройка_скалывателя.pdf"],
    "очистка": ["настройка_скалывателя.pdf"],
    "очистить": ["настройка_скалывателя.pdf"],
    "снять": ["настройка_скалывателя.pdf"],
    "оболочка": ["настройка_скалывателя.pdf"],
    "покрытие": ["настройка_скалывателя.pdf"],
    "изоляция": ["настройка_скалывателя.pdf"],
    
    # Качество соединений
    "качество": ["настройка_скалывателя.pdf", "сварочные_аппараты.pdf"],
    "соединение": ["настройка_скалывателя.pdf", "сварочные_аппараты.pdf"],
    "соединения": ["настройка_скалывателя.pdf", "сварочные_аппараты.pdf"],
    "стык": ["настройка_скалывателя.pdf", "сварочные_аппараты.pdf"],
    "место": ["настройка_скалывателя.pdf", "сварочные_аппараты.pdf"],
    "шов": ["настройка_скалывателя.pdf", "сварочные_аппараты.pdf"],
    "join": ["настройка_скалывателя.pdf", "сварочные_аппараты.pdf"],
    "splice": ["настройка_скалывателя.pdf", "сварочные_аппараты.pdf"],
    
    # ===================
    # ИЗМЕРИТЕЛИ МОЩНОСТИ
    # ===================
    "измеритель": ["измерители_мощности.pdf"],
    "измерители": ["измерители_мощности.pdf"],
    "meter": ["измерители_мощности.pdf"],
    "power": ["измерители_мощности.pdf"],
    "измерить": ["измерители_мощности.pdf"],
    "измерение": ["измерители_мощности.pdf"],
    "замер": ["измерители_мощности.pdf"],
    "замерить": ["измерители_мощности.pdf"],
    "тестер": ["измерители_мощности.pdf"],
    "прибор": ["измерители_мощности.pdf"],
    "приборы": ["измерители_мощности.pdf"],
    
    # ===================
    # ПОДКЛЮЧЕНИЯ ЧАСТНЫЙ СЕКТОР
    # ===================
    "частный": ["частный_сектор.pdf"],
    "частного": ["частный_сектор.pdf"],
    "сектор": ["частный_сектор.pdf"],
    "дом": ["частный_сектор.pdf"],
    "дома": ["частный_сектор.pdf"],
    "домик": ["частный_сектор.pdf"],
    "коттедж": ["частный_сектор.pdf"],
    "особняк": ["частный_сектор.pdf"],
    "усадьба": ["частный_сектор.pdf"],
    "участок": ["частный_сектор.pdf"],
    "двор": ["частный_сектор.pdf"],
    "забор": ["частный_сектор.pdf"],
    "ворота": ["частный_сектор.pdf"],
    "калитка": ["частный_сектор.pdf"],
    
    # ===================
    # ПОДКЛЮЧЕНИЯ МКД
    # ===================
    "мкд": ["мкд.pdf"],
    "многоквартирный": ["мкд.pdf"],
    "многоэтажка": ["мкд.pdf"],
    "многоэтажный": ["мкд.pdf"],
    "квартира": ["мкд.pdf"],
    "квартиры": ["мкд.pdf"],
    "этаж": ["мкд.pdf"],
    "этажи": ["мкд.pdf"],
    "подъезд": ["мкд.pdf"],
    "подъезды": ["мкд.pdf"],
    "лестница": ["мкд.pdf"],
    "лестничная": ["мкд.pdf"],
    "площадка": ["мкд.pdf"],
    "коридор": ["мкд.pdf"],
    "тамбур": ["мкд.pdf"],
    "домком": ["мкд.pdf"],
    "управляющая": ["мкд.pdf"],
    "тсж": ["мкд.pdf"],
    "жэк": ["мкд.pdf"],
    
    # ===================
    # КОММЕРЧЕСКИЕ ОБЪЕКТЫ
    # ===================
    "офис": ["коммерческие.pdf"],
    "офиса": ["коммерческие.pdf"],
    "офисы": ["коммерческие.pdf"],
    "коммерция": ["коммерческие.pdf"],
    "коммерческий": ["коммерческие.pdf"],
    "коммерческая": ["коммерческие.pdf"],
    "коммерческие": ["коммерческие.pdf"],
    "бизнес": ["коммерческие.pdf"],
    "организация": ["коммерческие.pdf"],
    "предприятие": ["коммерческие.pdf"],
    "фирма": ["коммерческие.pdf"],
    "компания": ["коммерческие.pdf"],
    "магазин": ["коммерческие.pdf"],
    "салон": ["коммерческие.pdf"],
    "кафе": ["коммерческие.pdf"],
    "ресторан": ["коммерческие.pdf"],
    "банк": ["коммерческие.pdf"],
    "аптека": ["коммерческие.pdf"],
    "мастерская": ["коммерческие.pdf"],
    "склад": ["коммерческие.pdf"],
    
    # ===================
    # ДЕМОНСТРАЦИЯ УСЛУГ
    # ===================
    "демонстрация": ["демонстрация_услуг.pdf"],
    "демка": ["демонстрация_услуг.pdf"],
    "показ": ["демонстрация_услуг.pdf"],
    "показать": ["демонстрация_услуг.pdf"],
    "презентация": ["демонстрация_услуг.pdf"],
    "продажи": ["демонстрация_услуг.pdf"],
    "продать": ["демонстрация_услуг.pdf"],
    "клиент": ["демонстрация_услуг.pdf"],
    "клиенту": ["демонстрация_услуг.pdf"],
    "клиента": ["демонстрация_услуг.pdf"],
    "абонент": ["демонстрация_услуг.pdf"],
    "абонента": ["демонстрация_услуг.pdf"],
    "заказчик": ["демонстрация_услуг.pdf"],
    "заказчика": ["демонстрация_услуг.pdf"],
    "услуги": ["демонстрация_услуг.pdf"],
    "услуг": ["демонстрация_услуг.pdf"],
    "сервис": ["демонстрация_услуг.pdf"],
    "service": ["демонстрация_услуг.pdf"],
    "тариф": ["демонстрация_услуг.pdf"],
    "тарифы": ["демонстрация_услуг.pdf"],
    "план": ["демонстрация_услуг.pdf"],
    "пакет": ["демонстрация_услуг.pdf"],
    "скорость": ["демонстрация_услуг.pdf"],
    "мбит": ["демонстрация_услуг.pdf"],
    "мегабит": ["демонстрация_услуг.pdf"],
    "гбит": ["демонстрация_услуг.pdf"],
    "гигабит": ["демонстрация_услуг.pdf"],
    
    # ===================
    # ОБЩИЕ ТЕРМИНЫ
    # ===================
    "неисправность": ["диагностика_затухания_gpon.pdf", "простые_ont.pdf"],
    "неполадка": ["диагностика_затухания_gpon.pdf", "простые_ont.pdf"],
    "проблема": ["диагностика_затухания_gpon.pdf", "простые_ont.pdf"],
    "ошибка": ["диагностика_затухания_gpon.pdf", "простые_ont.pdf"],
    "глюк": ["диагностика_затухания_gpon.pdf", "простые_ont.pdf"],
    "баг": ["диагностика_затухания_gpon.pdf", "простые_ont.pdf"],
    "сломался": ["диагностика_затухания_gpon.pdf", "простые_ont.pdf"],
    "сломан": ["диагностика_затухания_gpon.pdf", "простые_ont.pdf"],
    "не работает": ["диагностика_затухания_gpon.pdf", "простые_ont.pdf"],
    "нет связи": ["диагностика_затухания_gpon.pdf", "простые_ont.pdf"],
    "отвалился": ["диагностика_затухания_gpon.pdf", "простые_ont.pdf"],
    
    # Действия
    "подключить": ["частный_сектор.pdf", "мкд.pdf", "коммерческие.pdf"],
    "установить": ["частный_сектор.pdf", "мкд.pdf"],
    "настроить": ["настройка_роутеров.pdf", "настройка_скалывателя.pdf"],
    "починить": ["диагностика_затухания_gpon.pdf", "простые_ont.pdf"],
    "исправить": ["диагностика_затухания_gpon.pdf", "простые_ont.pdf"],
    "проверить": ["диагностика_затухания_gpon.pdf", "простые_ont.pdf"],
    
    # Инструкции и справочники
    "инструкция": ["частный_сектор.pdf", "мкд.pdf", "настройка_роутеров.pdf"],
    "мануал": ["частный_сектор.pdf", "мкд.pdf", "настройка_роутеров.pdf"],
    "manual": ["частный_сектор.pdf", "мкд.pdf", "настройка_роутеров.pdf"],
    "руководство": ["частный_сектор.pdf", "мкд.pdf", "настройка_роутеров.pdf"],
    "гайд": ["частный_сектор.pdf", "мкд.pdf", "настройка_роутеров.pdf"],
    "guide": ["частный_сектор.pdf", "мкд.pdf", "настройка_роутеров.pdf"],
    "справочник": ["быстрый_справочник.pdf"],
    "быстрый": ["быстрый_справочник.pdf"],
    "quick": ["быстрый_справочник.pdf"],
    "как": ["частный_сектор.pdf", "мкд.pdf", "настройка_роутеров.pdf"],
    "что": ["диагностика_затухания_gpon.pdf", "простые_ont.pdf"],
    "зачем": ["демонстрация_услуг.pdf"],
    "почему": ["диагностика_затухания_gpon.pdf", "простые_ont.pdf"],
    
    # Инструменты
    "инструмент": ["измерители_мощности.pdf", "сварочные_аппараты.pdf"],
    "инструменты": ["измерители_мощности.pdf", "сварочные_аппараты.pdf", "настройка_скалывателя.pdf"]
}

# Настройки
TIMEOUT_SECONDS = 30
LOG_FILE = "bot_stats.txt"
DEBUG_MODE = True  # Включить отладку
